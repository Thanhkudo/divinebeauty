!function(){"use strict";const t=window?.bit_assist_?.api?.base||"http://bit-assist-wp.test/wp-json/bit-assist/v1",i=window?.bit_assist_?.api?.base?`${bit_assist_.api.base}/iframe`:"http://localhost:5000",e=new URL(i).origin,s=window?.bit_assist_?.api?.separator||"?",a=window.location.origin,o=window.location.href,n=document.documentElement.offsetWidth,d=window.innerHeight;let r="100px",c="100px",l=0;const w=`\n#bit-assist-widget-container{--ba-top:auto;--ba-left:auto;--ba-bottom:10;--ba-right:10;position:fixed;z-index:9999999;bottom:0;right:0;width:${c};height:${r};max-width:100%}\n#bit-assist-widget-container.bottom-right{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.bottom-left{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.top-right{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-container.top-left{left:var(--ba-left);right:var(--ba-right);top:var(--ba-top);bottom:var(--ba-bottom)}\n#bit-assist-widget-iframe{width:100%;height:100%;border:none;position:absolute}\n.bit-assist-hide{visibility:hidden;pointer-events:none}\n`,b=document.createElement("style");b.appendChild(document.createTextNode(w));const h=document.createElement("div");h.id="bit-assist-widget-container",h.classList.add("bit-assist-hide");const g=document.createElement("iframe");function f(t,i=!1){const e=window.scrollY,s=document.body.offsetHeight,a=window.innerHeight,o=Math.round(e/(s-a)*100);if(!i)return o;!l&&o>=i?(l=1,p(o)):l&&o<i&&(l=0,p(o))}function p(t){g.contentWindow.postMessage({action:"scrollPercent",scrollPercent:t},e)}function m(t,i){c=t+"px",r=i+"px",Object.assign(h.style,{width:c,height:r})}function u(){return"undefined"!=typeof Tawk_API}g.src=`${i}${s}clientDomain=${a}`,g.id="bit-assist-widget-iframe",g.setAttribute("allowfullscreen",""),g.setAttribute("scrolling","no"),h.appendChild(g),document.body.append(b,h),document.addEventListener("click",(t=>{h.classList.contains("bit-assist-open")&&!t.target.closest("#bit-assist-widget-container")&&g.contentWindow.postMessage({action:"clickOutside"},e)})),window.addEventListener("message",(i=>{if(i.origin!==e)return;const{action:s}=i.data;if("getClientInfo"===s){const i=f();g.contentWindow.postMessage({action:"windowLoaded",url:o,winWidth:n,winHeight:d,scrollPercent:i,apiEndPoint:t},e)}else if("widgetLoaded"===s){const{height:t,width:e,position:s,top:a,bottom:o,left:n,right:d,pageScroll:r}=i.data;!function(t,i,e,s,a){t.indexOf("top")>-1&&h.style.setProperty("--ba-top",i+"px");t.indexOf("bottom")>-1&&h.style.setProperty("--ba-bottom",e+"px");t.indexOf("left")>-1&&h.style.setProperty("--ba-left",s+"px");t.indexOf("right")>-1&&h.style.setProperty("--ba-right",a+"px")}(s,a,o,n,d),h.classList.remove("bit-assist-hide"),h.classList.add(s),m(e,t),r>0&&window.addEventListener("scroll",(t=>f(0,r)))}else if("widgetOpen"===s){const{isWidgetOpen:t}=i.data;h.classList.toggle("bit-assist-open",t)}else if("removeWidget"===s)h.remove(),b.remove();else if("resetWidgetSize"===s){const{height:t,width:e}=i.data;m(e,t)}else if("chatWidgetClick"===s){const{chatWidgetName:t}=i.data;!function(t){"tawk"===t&&function(){if(!u())return alert("Sorry, Tawk not loaded yet."),null;try{Tawk_API=Tawk_API||{},Tawk_API.showWidget(),Tawk_API.toggle(),h.classList.add("bit-assist-hide")}catch(t){alert("Sorry, Tawk not loaded yet."),h.classList.remove("bit-assist-hide")}}()}(t)}else if("bitAssistChannelClick"===s){const{channelInfo:t}=i.data;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"bitAssistChannel",...t})}})),window.addEventListener("load",(()=>{!function(){if(!u())return!1;Tawk_API=Tawk_API||{},Tawk_API.onLoad=function(){Tawk_API.hideWidget()},Tawk_API.onChatStarted=function(){Tawk_API.showWidget(),h.classList.add("bit-assist-hide")},Tawk_API.onChatMessageAgent=function(){Tawk_API.showWidget(),h.classList.add("bit-assist-hide")},Tawk_API.onChatMessageSystem=function(){Tawk_API.showWidget(),h.classList.add("bit-assist-hide")},Tawk_API.onChatEnded=function(){Tawk_API.hideWidget(),h.classList.remove("bit-assist-hide")},Tawk_API.onChatMinimized=function(){Tawk_API.hideWidget(),h.classList.remove("bit-assist-hide")},Tawk_API.onStatusChange=function(){Tawk_API.hideWidget()}}()}))}();